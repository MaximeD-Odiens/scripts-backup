<!-- JS function testing in Chrome Developer Console ; HTML tag script to delete -->
<script>
  (function(){
    // write code here
  })();
  // for Custom JavaScript Variable in GTM, delete () of function() and () after the function()
</script>

<!-- Get H1 -->
<script>
function (){
  var h1GrosTitreCollection = document.getElementsByClassName('GrosTitre');
  //var h1GrosTitreCollection = document.getElementsByTagName('h1');
  
  if (typeof h1GrosTitreCollection[0] != 'undefined'){
    var h1GrosTitre = h1GrosTitreCollection[0].innerHTML;
    return h1GrosTitre;
  }
}
</script>

<!-- Set Cookie -->
<script>
  var cookieName = "libelleOffreEmploi"; // Name of your cookie
  var cookieValue = {{JS Personnalis√© - H1 .PtiTitre}}; // Value of your cookie
  var expirationTime = 2592000; // One month in seconds
  expirationTime = expirationTime * 1000; // Converts expirationtime to milliseconds
  var date = new Date(); 
  var dateTimeNow = date.getTime(); 
  date.setTime(dateTimeNow + expirationTime); // Sets expiration time (Time now + one month)
  var date = date.toUTCString(); // Converts milliseconds to UTC time string
  document.cookie = cookieName+"="+cookieValue+"; SameSite=None; Secure; path=/; domain=." + location.hostname.replace(/^www\./i, ""); // Sets cookie for all subdomains
</script>

<!-- Modify cookie _ga expiration to 13 months -->
<script>
  function(){
    try {
      var ga = {{Cookie - _ga}};
      var ga_create= (Number(ga.split(".").pop()))*1000;
      var sec_expire = 60*60*24*30*13*1000;
      var t = new Date().getTime();
      var t0 = new Date(ga_create).getTime();
      var t1 = t0 + sec_expire;
      var t_diff = Math.round((t1-t)/1000);
      return t_diff;
    } catch(e){
      return sec_expire/1000;
      console.log(e);
    }
  }
</script>

<!-- is mobile ? maybe need an update -->
<script>
  function() {
    if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
      return 'true';
    } 
    else {
      return 'false';
    }
  }
</script>

<!-- capture checked-box fields of a form, source : https://www.simoahava.com/analytics/track-form-engagement-with-google-tag-manager/ -->
<script>
function() {
  var groupName = "field151[]";
  var elems = document.querySelectorAll('[name="' + groupName + '"]:checked');
  var vals = [];
  var i, len;
  for (i = 0, len = elems.length; i < len; i++) {
    vals.push(elems[i].value);
  }
  return vals.length ? vals.join(' ') : undefined;
} 
</script>

<!-- capture field value of a form -->
<script>
function() {
  var field = {{Form Element}}.querySelector('#field55id');
  return field ? field.value : undefined;
}
</script>
